<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ£è¯èŠ‚å¿«ä¹ï¼Œäº²çˆ±çš„å®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f8ff;
            background-image: 
                radial-gradient(circle at 25% 25%, #ff6b6b 0.5px, transparent 0.5px),
                radial-gradient(circle at 75% 75%, #4ecdc4 0.5px, transparent 0.5px);
            background-size: 20px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        h1 {
            color: #ff6b6b;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tree {
            font-size: 2rem;
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            max-width: 1000px;
            margin-bottom: 30px;
        }

        .card {
            width: 150px;
            height: 200px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
            transform-style: preserve-3d;
            margin: 0 auto;
        }

        .card:hover {
            transform: translateY(-10px) scale(1.05);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card-front {
            background-color: white;
            border: 2px solid #4ecdc4;
            overflow: hidden;
        }

        .card-front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-back {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            transform: rotateY(180deg);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.clone {
            position: fixed;
            z-index: 1000;
            pointer-events: none;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #ff6b6b;
            top: -10px;
            z-index: 1001;
            animation: confettiFall linear infinite;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-10vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) rotate(360deg);
                opacity: 0;
            }
        }

        .snowflake {
            position: fixed;
            color: #fff;
            font-size: 1em;
            user-select: none;
            z-index: 9999;
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) rotate(360deg);
                opacity: 0;
            }
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <h1><span class="tree">ğŸ„</span> åœ£è¯èŠ‚å¿«ä¹ï¼Œäº²çˆ±çš„å® <span class="tree">ğŸ„</span></h1>
    
    <div class="cards-container" id="cardsContainer">
        <!-- å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
    </div>

    <div class="controls">
        <button class="btn" id="resetBtn">é‡æ–°å¼€å§‹</button>
        <button class="btn" id="musicBtn">ğŸ”‡ å…³é—­éŸ³ä¹</button>
    </div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="backgroundMusic" loop>
        <source src="image/ã‚¯ãƒªã‚¹ãƒã‚¹ã‚½ãƒ³ã‚°-back_number-6714982-100.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å…ƒç´ ã€‚
    </audio>

    <script>
        // æŠ½å¥–ç»“æœæ•°æ®
        const prizes = [
            "ä¸å¥–ï¼šå•¥éƒ½æ²¡ï¼æ€ä¹ˆå¯èƒ½ï¼ä½ æ¥å®š",
            "äºŒç­‰å¥–ï¼š521",
            "ä¸‰ç­‰å¥–ï¼š88",
            "å‚ä¸å¥–ï¼šå•¥éƒ½æ²¡ï¼æ€ä¹ˆå¯èƒ½ï¼ä½ æ¥å®šï¼",
            "å‚ä¸å¥–ï¼šå•¥éƒ½æ²¡ï¼æ€ä¹ˆå¯èƒ½ï¼ä½ æ¥å®šï¼",
            "äºŒç­‰å¥–ï¼š521",
            "ä¸€ç­‰å¥–ï¼š888",
            "ä¸‰ç­‰å¥–ï¼š88",
            "ä¸€ç­‰å¥–ï¼š521",
            "å‚ä¸å¥–ï¼šå•¥éƒ½æ²¡ï¼æ€ä¹ˆå¯èƒ½ï¼ä½ æ¥å®šï¼",
            "å‚ä¸å¥–ï¼šå•¥éƒ½æ²¡ï¼æ€ä¹ˆå¯èƒ½ï¼ä½ æ¥å®šï¼",
            "ä¸€ç­‰å¥–ï¼š888",
            "ä¸‰ç­‰å¥–ï¼š88"
        ];

        // å¡ç‰‡çŠ¶æ€
        let cards = [];
        let isAnimating = false;
        let currentClone = null;
        let currentOriginal = null;

        // åˆå§‹åŒ–å¡ç‰‡
        function initCards() {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';
            cards = [];

            for (let i = 0; i < 13; i++) {
                const card = createCard(i + 1, prizes[i]);
                container.appendChild(card);
                cards.push(card);
            }
        }

        // åˆ›å»ºå¡ç‰‡å…ƒç´ 
        function createCard(index, prize) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.index = index;

            // åˆ›å»ºæ­£é¢
            const front = document.createElement('div');
            front.className = 'card-face card-front';
            
            // åˆ›å»ºå›¾ç‰‡å…ƒç´ 
            const img = document.createElement('img');
            img.src = `image/æ­£é¢_${index}.png`;
            img.alt = `å¡ç‰‡ ${index}`;
            img.onerror = function() {
                this.style.display = 'none';
                front.innerHTML = `<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: #4ecdc4; font-size: 1.5rem; font-weight: bold;">å¡ç‰‡ ${index}</div>`;
            };
            front.appendChild(img);

            // åˆ›å»ºèƒŒé¢
            const back = document.createElement('div');
            back.className = 'card-face card-back';
            back.innerHTML = `<div>${prize}</div>`;

            card.appendChild(front);
            card.appendChild(back);

            card.addEventListener('click', () => flipCard(card));

            return card;
        }

        // ç¿»è½¬å¡ç‰‡
        function flipCard(card) {
            if (isAnimating) return;
            isAnimating = true;

            // å¦‚æœæœ‰å½“å‰å…‹éš†å¡ç‰‡ï¼Œå…ˆç§»é™¤
            if (currentClone) {
                currentClone.remove();
                currentClone = null;
                // æ˜¾ç¤ºåŸå¡ç‰‡
                if (currentOriginal) {
                    currentOriginal.style.visibility = 'visible';
                    currentOriginal = null;
                }
            }

            // è®°å½•å½“å‰å¡ç‰‡
            currentOriginal = card;
            
            // åˆ›å»ºå…‹éš†å¡ç‰‡
            const clone = card.cloneNode(true);
            clone.className = 'card clone';
            
            // è®°å½•åŸå¡ç‰‡ä½ç½®
            const rect = card.getBoundingClientRect();
            clone.style.left = `${rect.left}px`;
            clone.style.top = `${rect.top}px`;
            clone.style.width = `${rect.width}px`;
            clone.style.height = `${rect.height}px`;
            
            // éšè—åŸå¡ç‰‡
            card.style.visibility = 'hidden';
            
            // æ·»åŠ å…‹éš†åˆ°é¡µé¢
            document.body.appendChild(clone);
            currentClone = clone;
            
            // åŠ¨ç”»æ­¥éª¤1ï¼šç§»åŠ¨åˆ°ä¸­å¤®å¹¶æ”¾å¤§
            setTimeout(() => {
                clone.style.transition = 'all 0.4s ease';
                clone.style.left = '50%';
                clone.style.top = '50%';
                clone.style.transform = 'translate(-50%, -50%) scale(1.5)';
                clone.style.width = '300px';
                clone.style.height = '400px';
            }, 10);
            
            // åŠ¨ç”»æ­¥éª¤2ï¼šç¿»è½¬å¡ç‰‡
            setTimeout(() => {
                clone.style.transition = 'transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                clone.style.transform = 'translate(-50%, -50%) scale(1.5) rotateY(180deg)';
                createConfetti();
            }, 400);
            
            // å®ŒæˆåŠ¨ç”»
            setTimeout(() => {
                isAnimating = false;
            }, 1000);
        }

        // åˆ›å»ºå½©èŠ±æ•ˆæœ
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                confetti.style.backgroundColor = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#ffd93d', '#6bcb77'][Math.floor(Math.random() * 5)];
                document.body.appendChild(confetti);

                // 5ç§’åç§»é™¤å½©èŠ±
                setTimeout(() => confetti.remove(), 5000);
            }
        }

        // åˆ›å»ºé›ªèŠ±æ•ˆæœ
        function createSnowflakes() {
            const snowflakes = 'â„ï¸';
            for (let i = 0; i < 30; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.textContent = snowflakes;
                snowflake.style.left = `${Math.random() * 100}%`;
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                snowflake.style.animationDuration = `${Math.random() * 10 + 10}s`;
                snowflake.style.fontSize = `${Math.random() * 1.5 + 0.5}em`;
                document.body.appendChild(snowflake);
            }
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            // ç§»é™¤å…‹éš†å¡ç‰‡
            if (currentClone) {
                currentClone.remove();
                currentClone = null;
            }
            
            // æ˜¾ç¤ºæ‰€æœ‰åŸå¡ç‰‡
            if (currentOriginal) {
                currentOriginal.style.visibility = 'visible';
                currentOriginal = null;
            }
            
            // ç§»é™¤æ‰€æœ‰å½©èŠ±
            const confettiElements = document.querySelectorAll('.confetti');
            confettiElements.forEach(confetti => confetti.remove());
        }

        // éŸ³ä¹æ§åˆ¶
        const music = document.getElementById('backgroundMusic');
        const musicBtn = document.getElementById('musicBtn');
        let isMusicPlaying = false;

        // éŸ³ä¹æ’­æ”¾/æš‚åœæ§åˆ¶
        function toggleMusic() {
            if (isMusicPlaying) {
                music.pause();
                musicBtn.textContent = 'ğŸµ æ’­æ”¾éŸ³ä¹';
            } else {
                music.play().catch(error => {
                    console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’:', error);
                    musicBtn.textContent = 'ğŸµ æ’­æ”¾éŸ³ä¹';
                });
                musicBtn.textContent = 'ğŸ”‡ å…³é—­éŸ³ä¹';
            }
            isMusicPlaying = !isMusicPlaying;
        }

        // ç‚¹å‡»ç©ºç™½å¤„è®©å¡ç‰‡å½’ä½
        function handleBlankClick(event) {
            // åˆ¤æ–­æ˜¯å¦ç‚¹å‡»äº†ç©ºç™½å¤„ï¼ˆä¸æ˜¯å¡ç‰‡ã€æŒ‰é’®ç­‰äº¤äº’å…ƒç´ ï¼‰
            const target = event.target;
            if (target.tagName === 'BODY' || target.className === 'cards-container' || target.tagName === 'HTML') {
                // å¦‚æœæœ‰å½“å‰å…‹éš†å¡ç‰‡ï¼Œæ‰§è¡Œå½’ä½é€»è¾‘
                if (currentClone) {
                    currentClone.remove();
                    currentClone = null;
                    // æ˜¾ç¤ºåŸå¡ç‰‡
                    if (currentOriginal) {
                        currentOriginal.style.visibility = 'visible';
                        currentOriginal = null;
                    }
                }
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initCards();
            createSnowflakes();

            // é‡ç½®æŒ‰é’®äº‹ä»¶
            document.getElementById('resetBtn').addEventListener('click', resetGame);
            
            // éŸ³ä¹æŒ‰é’®äº‹ä»¶
            musicBtn.addEventListener('click', toggleMusic);
            
            // é¡µé¢åŠ è½½åå°è¯•æ’­æ”¾éŸ³ä¹ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½æˆåŠŸ
            // æ·»åŠ å…¨å±€ç‚¹å‡»äº‹ä»¶ï¼Œé¦–æ¬¡ç‚¹å‡»é¡µé¢æ—¶æ’­æ”¾éŸ³ä¹
            document.body.addEventListener('click', () => {
                if (!isMusicPlaying) {
                    music.play().catch(error => {
                        console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥:', error);
                    });
                    isMusicPlaying = true;
                    musicBtn.textContent = 'ğŸ”‡ å…³é—­éŸ³ä¹';
                }
            }, { once: true });
            
            // æ·»åŠ ç‚¹å‡»ç©ºç™½å¤„å½’ä½äº‹ä»¶
            document.body.addEventListener('click', handleBlankClick);
        });
    </script>
</body>
</html>